% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mutate_sub_district.R
\name{mutate_sub_district}
\alias{mutate_sub_district}
\title{Standardise subdistrict names}
\usage{
mutate_sub_district(
  data,
  subdistrict_variable = "subdistrict",
  unmatched = c("keep_raw", "NA"),
  use_fuzzy = requireNamespace("fuzzyjoin", quietly = TRUE),
  max_dist = 2,
  dict = NULL
)
}
\arguments{
\item{data}{A data.frame or tibble containing the subdistrict column.}

\item{subdistrict_variable}{Character scalar. Name of the column in \code{data}
that contains the subdistrict text. Default: "subdistrict".}

\item{unmatched}{Character. What to do with unmatched values: either
"keep_raw" (leave the original text) or "NA" (set to NA). Default is
c("keep_raw", "NA").}

\item{use_fuzzy}{Logical. If TRUE and the package \code{fuzzyjoin} is available,
a fuzzy string-distance match will be attempted for remaining unmatched
values. Default uses requireNamespace("fuzzyjoin", quietly = TRUE).}

\item{max_dist}{Numeric. Maximum allowed distance for fuzzy matching (osa
method). Default: 2.}

\item{dict}{Optional dictionary tibble created by
\code{build_sa_subdistrict_dictionary()}. If NULL the dictionary will be
constructed internally.}
}
\value{
The input \code{data} with two new columns appended:
\itemize{
\item \code{subdistrict_standard}: the standardised subdistrict (character or NA)
\item \code{.sd_match_method}: the method used to match ("exact_norm", "regex",
"fuzzy", or NA)
}
}
\description{
Take a data frame with a free-text subdistrict column and return the data
frame with a standardised subdistrict name column (\code{subdistrict_standard}) and
a match-method column (\code{.sd_match_method}). The function uses an internal
dictionary (built by \code{build_sa_subdistrict_dictionary()}) and performs
exact-normalised, regex and optional fuzzy matching passes.
}
\examples{
df <- tibble::tibble(subdistrict = c("Cape Town", "unknown place"))
Make_sub_district_name(df)
}
